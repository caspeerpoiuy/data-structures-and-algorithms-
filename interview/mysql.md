<H3>1.MySQL存储过程

	  SQL语句需要先编译然后执行，而存储过程是一组为了完成特定功能的SQL语句集，经编译后存储在数据库中
	用户通过指定存储过程的名字并给定参数（如果该存储过程带有参数）来调用执行他。
	  存储过程是可编程的函数，在数据库中创建并保存，可以用SQL语句和控制结构组成。当想要在不同的应用程
	序或平台上执行相同的函数，或者封装特定功能时，存储过程是非常有用的。数据库中的存储过程可以看作是对
	编程中面向对象方法的模拟，它允许控制数据的访问方式。
	
	存储过程的优点：
	(1).增强SQL语言的功能和灵活性：存储过程可以用控制语句编写，有很强的灵活性，可以完成复杂的判断和较
	复杂的判断和较复杂的运算。	
	(2).标准组件式编程：存储过程被创建后，可以在程序中被多次调用，而不必重新编写该存储过程的SQL语句。
	而且数据库专业人员可以随时对存储过程进行修改，对应用程序源代码毫无影响。
	(3).较快的执行速度：如果某一操作包含大量的Transaction-SQL代码或分别被多次执行，那么存储过程要比
	批处理的执行速度快很多，因为存储过程是预编译的。在首次运行一个存储过程时查询，优化器对其进行分析化，
	并且给出最终被存储在系统表中的执行计划。而批处理的Transaction-SQL语句在每次运行时都要进行编译和
	优化，速度相对要慢一些。
	(4).减少网络流量：针对同一个数据库对象的操作(如查询、修改)，如果这一操作所设计的Transaction-SQL
	语句被组织近存储过程，那么当在客户计算机上调用该存储过程时，网络中传送的只是调用该语句，从而大大减
	少网络流量并降低了负载均衡。
	(5).作为一种安全机制来充分利用：通过对执行某一存储过程的权限进行限制，能够实现对相应的数据的访问权
	限的限制，避免了非授权用户对数据的访问，保证了数据的安全。
	
	
<H3>2.数据库事务的四个特性及含义

	数据库事务transaction正确执行的四个基本要素。
	原子性：整个事务中的所有操作，要么全部完成，要么全部不完成，不可能停滞在中间某个环节。事务在执行过程
	中发生错误，会被回滚到事务开始前的状态，就像这个事务从来没有执行过一样。
	一致性：在事务开始之前和事务结束以后，数据库的完整性约束没有被破坏。
	隔离性：隔离状态执行事务，使他们好像是系统在给定时间内执行的唯一操作。如果有两个事务，运行在相同的时
	间内，执行相同的功能，事务的隔离性讲确保每一事物在系统中认为只有该事物在使用系统。这种属性有时称为串
	行化，为了防止事务操作间的混淆，必须串行化或序列化请求，使得在同一时间仅有一个请求由于统一数据。
	持久性：在事务完成以后，该事物所对数据库所作的更改便持久的保存在数据库中，并不会回滚。
	
	
<H3>3.索引的工作原理及其种类

	数据库索引，是数据库管理系统中一个排序的数据结构，以协助快速查询、更新数据库表中数据。索引的实现通常
	使用B树及其变种B+树。
	在数据之外，数据库系统还维护着满足特定查找算法的数据结构，这些数据结构以某种方式引用(指向)数据，这样
	就可以在这些数据结构上实现高级查找算法。这种数据结构，就是索引。
	为表设置索引要付出代价的：一是增加了数据库的存储空间，二是在插入和修改数据时要花费较多的空间(因为索引
	也要随之变动)
	
	创建索引可以大大提高系统的性能。
	(1).通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性。
	(2).可以大大加快数据的检索速度，这也是创建索引的最主要原因。
	(3).可以加速表和表之间的连接，特别是在实现数据的参考完整性方面特别有意义。
	(4).在使用分组和排序语句进行数据检索时，同样可以显著减少查询中分组和排序的时间。
	(5).通过使用索引，可以在查询的过程中，使用优化隐藏器，提高系统的性能。
	
	为什么不对表中每一列都创建索引：
	(1).创建所以和维护索引要耗费时间，这种时间随着数据量的增加而增加。
	(2).索引需要占屋里空间，除了数据表占数据空间之外，每一个索引还要占一定的物理空间，如果要简历简历聚簇
	索引，那么需要的空间就会更大。
	(3).当对表中的数据进行增加、删除和修改的时候，索引也要动态的维护，这样就降低了数据的维护速度/
	
	在那些列上创建索引：
	(1).经常需要搜索的列上，可以加快搜索速度。
	(2).在作为主键的列上，强制该列的唯一性和组织数据表中数据的排列结构。
	(3).在经常用在连接的列上，这些列主要是一些外键，可以加快连接速度。
	(4).在经常需要根据范围进行搜索的列上创建索引，因为索引已经排序，其指定的范围是连续的。
	(5).在经常需要排序的列上创建索引，因为索引已经排序，这样查询可以利用索引的排序，加快排序查询时间。
	(6).在经常使用在WHERE语句中的列上面创建索引，加快条件的判断速度。
	
	不应该创建索引的这些列具有下列特点：
	(1).对于那些在查询中很少使用或者参考的列不应该创建索引。这是因为，既然这些列很少使用到，因此有索引
	或者无索引，并不能提高查询速度。相反，由于增加了索引，反而降低了系统的维护速度和增大了空间需求。
	(2).对于那些只有很少数据值的列也不应该增加索引。这是因为，由于这些列的取值很少，例如人事表的性别列
	在查询的结果中，结果集的数据行占了表中数据的很大比例，即需要在表中搜索的数据行的比例很大。增加索引，
	并不能明显加快检索速度。
	(3).对于那些定义为text，image和bit数据类型的列不应该增加索引。这是因为，这些列的数据量要么相当
	大，要么取值很少。
	(4).当修改性能远远大于检索性能时，不应该创建索引。这是因为，修改性能和检索性能时互相矛盾的。当增加
	索引时，会提高检索性能，但是会降低修改性能。当减少索引时，会提高修改性能，降低检索性能。因此，当修
	改性能远远大于检索性能时，不应该创建索引。
	
	根据数据库的功能，可以在数据库中创建三种索引：唯一索引、主键索引和聚集索引。
	
	唯一索引：
	唯一索引是不允许其中任何两行具有相同索引值的索引。
	当现有数据中存储重复的键值时，大多数据数据库不允许将新创建的唯一索引与表一起保存。数据库还可能防止添
	加将在表中创建重复键值的新数据。例如：如果在employee表中职员的姓(name)上创建了唯一索引，则任何两个
	员工都不能同姓。
	
	主键索引：
	数据库表经常有一列或列组合，其值唯一标识表中的每一行，该列称为表的主键。在数据库关系图中为表定义主键将
	自动创建主键索引，主键索引是唯一索引的特定类型。该索引要求主键中的每个值都唯一。当在查询中使用主键索引
	时，它还允许对数据的快速访问。
	
	聚集索引：
	在聚集索引中，表中行的物理顺序与键值的逻辑(索引)顺序相同。一个表只能包含一个聚集索引。
	
	如果某索引不是聚集索引，则表中行的屋里顺序与键值的逻辑顺序不匹配。与非聚集索引相比，聚集索引通常提供更
	快的数据访问速度。
	
	
	局部性原理与磁盘预读
	
	由于存储介质的特性，磁盘本身存取就比主存慢很多，再加上机械运动耗费，磁盘的存取速度往往是主存的的几百分
	分之一，因此为了提高效率，要尽量减少磁盘I/O。为了达到这个目的，磁盘往往不是严格按需读取，而是每次都会
	预读，即使只需要一个字节，磁盘也会从这个位置开始，顺序向后读取一定长度的数据放入内存。这样做的理论依据
	是计算机科学中著名的局部性原理：当一个数据被用到时，其附近的数据也通常会马上被使用。程序运行期间所需要
	的数据通常比较集中。
	
	由于磁盘顺序读取的效率很高（不需要寻道时间，只需很少的旋转时间），因此对于具有局部性的程序来说，预读可
	以提高I/O效率。
	预读的长度一般为页的整数倍。页是计算机管理存储器的逻辑块，硬件及操作系统往往将主存和磁盘存储区分割为大
	小相等的块，每个存储块称为一页（在许多操作系统中，页的大小通常为4k），主存和磁盘以页为单位交换数据。当
	程序要读取的数据不存在主存中，会触发一个缺页一场，此时系统会向磁盘发出读盘信号，磁盘会找到数据的起始位
	置并向后连续读取一页或几页载入内存中，然后异常返回，程序继续运行。
	
	B-/+Tree索引的性能分析
	
	一般使用磁盘I/O次数评价索引结构的优劣。
	B-Tree可知检索一次最多需要访问个h个节点。数据库系统的设计者巧妙利用了磁盘预读原理，将一个节点的大小
	设为等于一个页，这样每个节点只需要一次I/O就可以完全载入。为了达到这个目的，在实际实现B-Tree还需要使
	用如下技巧：
	每次新建节点时，直接申请一个页的空间，这样就保证一个节点物理上也存在一个页里，加之计算机存储分配时按
	页对齐的，就实现了一个node只需一次I/O。
	B-Tree中一次检索最多需要h-1次I/O（根节点常驻内存），渐进复杂度为O（h）=O（logdN）。一般实际应用
	中，出度d是非常大的数字，通常超过100，因此h非常小（通常不超过3）。
	而红黑树这种结构，h明显要深得多。由于逻辑上的很近的节点（父子）物理上可能很远，无法利用局部性，所以红
	黑树的I/O渐进复杂度也为O（h），效率明显比B-Tree差很多。
	综上所述，用B-Tree作为索引结构效率是非常高的。
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	